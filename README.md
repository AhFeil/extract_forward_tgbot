
# extract_forward_TGbot

Telegram 上有很多优秀频道每日更新，一般通过收藏夹、私密频道或私人对话收藏消息，但是只收藏是不够的，还需要整理这些信息。

手机天然不适合整理信息，而在电脑上，直接操作这些收藏的信息也不便捷。

这个需求促使我编写了这个转发机器人。


## 它的工作流程：
1. 把消息转存给它（只支持纯文本消息和图片附带消息那种），或者直接发消息
2. 它会提取其中的文本和内链网址并将之存在文件里，内链网址会按照顺序放到文本后面。
3. 发送命令 `/forward` ，它会将上面文件里的全部内容复制到另一个方便访问的文件中，目前用的是 [网络记事本](https://github.com/pereorga/minimalist-web-notepad)，访问对应网页就能看到。
4. 在电脑查看网页，高效处理这些大量信息。

> 我习惯在周末把一周积累的一次性推送到网页，然后处理。


## 目前的命令：
1. `/start`：验证是否能连接、是否运行、所在系统环境
2. `/forward`：另存所有保存的消息，并会询问是否'/clear'
3. `/emsg`：查看保存的消息数量，最早一条的消息和其保存时间
4. `/dmsg`：删保存的最新的一条并返回文本，可以实现外显链接
5. `/shutdown`：关闭机器人，暂时不知道怎么实现开启
6. `/clear`：清除保存的所有消息，会有询问


## 代办
1. 改用数据库存储 SQLite
2. 添加定时重复处理提醒（比如每周一发送处理提醒）。还有固定数量信息提醒（比如100条了提醒）
3. 如果转存内容只包含一个网址，且在自定义的网址集合中，那么只保存这个网址，忽略其他内容（比如GitHub本身就有详细介绍），减少整理时要处理的信息。
4. 定制推送渠道


## 直接使用服务

> 自部署的流程在下面





## 自部署流程


拉取
```sh
git clone https://github.com/AhFeil/message_transfer_TGbot.git
```

安装环境和依赖
```sh
sudo apt install python3 python3-pip
pip install -r requirements.txt
```


编辑源代码来自定义一些信息，比如机器人信息的，管理员账号的，保存位置的。

